<mat-accordion>
  <form [formGroup]="accountForm">
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Informações do Restaurante
        </mat-panel-title>
        <mat-panel-description>
          Imagem, nome do estabelecimento, CNPJ, descrição
          <mat-icon>account_circle</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>

      <section class="flex flex-col items-stretch">
        <section class="p-3">
          Perfil Image Settings
        </section>
        <section class="">
          <div class="flex flex-row">
            <mat-form-field appearance="outline" class="m-2 flex-auto w-full">
              <mat-label>Nome do estabelecimento</mat-label>
              <input formControlName="name" matInput placeholder="Nome do estabelecimento">
              @if (name?.hasError('required')) {
                <mat-error>Campo obrigatório</mat-error>
              }
              <mat-hint>O nome do seu restaurante ou lanchonete</mat-hint>
            </mat-form-field>

            <mat-form-field appearance="outline" class="m-2 flex-auto w-full">
              <mat-label>CNPJ</mat-label>
              <input formControlName="cnpj" matInput placeholder="CNPJ">
              @if (cnpj?.hasError('required')) {
                <mat-error>Campo obrigatório</mat-error>
              }
            </mat-form-field>

          </div>
          <div class="flex flex-row">
            <mat-form-field appearance="outline" class="m-2 flex-auto w-full">
              <mat-label>Descrição</mat-label>
              <textarea formControlName="description" class="resize-none" matInput
                        placeholder="Conte um pouco sobre seu estabelecimento"></textarea>
            </mat-form-field>
          </div>

        </section>
      </section>
    </mat-expansion-panel>

    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Endereço
        </mat-panel-title>
        <mat-panel-description>
          Localização do estabelecimento
          <mat-icon>location_on</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <section class="flex flex-col" formGroupName="address">
        <div class="flex flex-row">
          <mat-form-field appearance="outline" class="m-2 flex-initial">
            <mat-label>CEP</mat-label>
            <input formControlName="zipcode" mask="00000-000" matInput placeholder="CEP" (focusout)="getAddress()">
            @if (zipcode?.hasError('required')) {
              <mat-error>Campo obrigatório</mat-error>
            }
          </mat-form-field>
          <mat-form-field appearance="outline" class="m-2 flex-auto w-full">
            <mat-label>Rua</mat-label>
            <input formControlName="street" matInput placeholder="Rua">
            @if (street?.hasError('required')) {
              <mat-error>Campo obrigatório</mat-error>
            }
          </mat-form-field>
          <mat-form-field appearance="outline" class="m-2 flex-initial">
            <mat-label>Número</mat-label>
            <input formControlName="number" matInput placeholder="Número">
          </mat-form-field>

        </div>
        <div class="flex flex-row">
          <mat-form-field appearance="outline" class="m-2 flex-auto w-full">
            <mat-label>Complemento</mat-label>
            <input formControlName="complement" matInput placeholder="Complemento">
          </mat-form-field>
          <mat-form-field appearance="outline" class="m-2 flex-auto w-full">
            <mat-label>Bairro</mat-label>
            <input formControlName="neighborhood" matInput placeholder="Bairro">
          </mat-form-field>
        </div>
        <div class="flex flex-row">
          <mat-form-field appearance="outline" class="m-2 flex-auto w-full">
            <mat-label>Cidade</mat-label>
            <input formControlName="city" matInput placeholder="Cidade">
            @if (city?.hasError('required')) {
              <mat-error>Campo obrigatório</mat-error>
            }
          </mat-form-field>
          <mat-form-field appearance="outline" class="m-2 flex-initial">
            <mat-label>Estado</mat-label>
            <input formControlName="state" matInput placeholder="Estado">
            @if (state?.hasError('required')) {
              <mat-error>Campo obrigatório</mat-error>
            }
          </mat-form-field>
        </div>
      </section>
    </mat-expansion-panel>

    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Horário de funcionamento
        </mat-panel-title>
        <mat-panel-description>
          Horário de funcionamento do estabelecimento
          <mat-icon>schedule</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <section class="flex flex-col">
        <div class="flex flex-row justify-center">
          <div class="flex flex-col">
            @for (day of daysOfWeek; track $index) {
              <mat-chip-listbox class="mat-mdc-chip-set-stacked">
                <div class="flex flex-col">
                  <mat-chip-option #option (selectionChange)="selectDay(day, $event)">{{ day }}</mat-chip-option>
                  @if (option.selected) {
                    <div class="flex flex-col my-4">
                      <div class="flex flex-row justify-between items-baseline">
                        <mat-form-field appearance="outline" class="ml-4 ms-flex-auto w-full">
                          <mat-label>Horário de início</mat-label>
                          <input matInput placeholder="Horário" aria-label="24hr format" [ngxTimepicker]="start"
                                 [format]="24"
                                 readonly>
                          <ngx-material-timepicker #start></ngx-material-timepicker>
                        </mat-form-field>

                        <span class="ml-4">à</span>

                        <mat-form-field appearance="outline" class="ml-4 flex-auto w-full">
                          <mat-label>Horário de término</mat-label>
                          <input matInput placeholder="Horário" aria-label="24hr format" [ngxTimepicker]="end"
                                 [format]="24"
                                 readonly>
                          <ngx-material-timepicker #end></ngx-material-timepicker>
                        </mat-form-field>
                      </div>
                      <button class="ml-4" mat-flat-button color="primary">Adicionar mais um intervalo de horário
                      </button>
                    </div>
                  }
                </div>
              </mat-chip-listbox>
            }
          </div>
        </div>
      </section>
    </mat-expansion-panel>
  </form>
</mat-accordion>


